{"ast":null,"code":"import std_but from \"/src/components/std_but.vue\";\nimport axios from 'axios';\nexport default {\n  name: 'musicInput',\n\n  data() {\n    return {\n      count: 0,\n      script: '',\n      typedscript: '',\n      error: ''\n    };\n  },\n\n  components: {\n    std_but\n  },\n  methods: {\n    clicked(nextchar) {\n      this.count++;\n      this.script = this.script.concat(nextchar);\n    },\n\n    reset() {\n      this.script = '';\n    },\n\n    async submitForm() {\n      var pattern = /^(([A-GR][1-9]+)*)$/;\n      console.log(pattern.test(this.typedscript));\n\n      if (!pattern.test(this.typedscript)) {\n        console.log('inputerr');\n        this.showBar('Input error. Please study the input format in detail.', '');\n        return;\n      }\n\n      var p = this.isFree();\n      console.log(\"checking server is free?\");\n      console.log(p);\n\n      if (this.isFree() == 0) {\n        console.log('robot playing');\n        this.showBar('The robot is currently playing music. Please try again later', '');\n        return;\n      }\n\n      if (this.isFree() == 2) {\n        this.showBar(\"Server error. Please try again later.\", '');\n        return;\n      } else {\n        console.log('submitted, typed');\n        const request = {\n          type: 'MusicInTyped',\n          arguments: this.typedscript\n        };\n        await axios.post('/api/input/', request).then(response => {\n          console.log(response);\n          this.showBar(\"Submission accepted. You will now be redirected home\", 'G');\n          setTimeout(this.redirectHome, 2500);\n        }).catch(error => {\n          console.log(error);\n          this.showBar(\"Server error. Please try again later.\", '');\n        });\n      }\n    },\n\n    async submitBut() {\n      console.log('submitted, button');\n      const request = {\n        type: 'MusicInButtoned',\n        arguments: this.script\n      };\n\n      if (window.$cookies.isKey(\"sum\")) {\n        window.$cookies.set(\"sum\", parseInt(window.$cookies.get(\"sum\")) + 1);\n      } else {\n        window.$cookies.set(\"sum\", \"1\");\n      }\n\n      await axios.post('/api/input/', request).then(response => {\n        console.log(response);\n        this.showBar(\"Submission accepted. You will now be redirected home\", 'G');\n        setTimeout(this.redirectHome, 2500);\n      }).catch(error => {\n        console.log(error);\n        this.showBar(\"Server error. Please try again later.\", '');\n      });\n    },\n\n    showBar(input, color) {\n      this.error = input;\n      var x = document.getElementById(\"snackbar\" + color);\n      x.className = \"show\";\n      setTimeout(function () {\n        x.className = x.className.replace(\"show\", \"\");\n      }, 3000);\n    },\n\n    redirectHome() {\n      this.$router.push('/');\n    },\n\n    isFree() {\n      console.log('getting data');\n      axios.get('/api/status').then(response => {\n        console.log(\"The data\");\n        console.log(response.data);\n\n        if (response.data == 'FREE') {\n          console.log(\"returning true\");\n          return 1;\n        } else {\n          return 0;\n        }\n      }).catch(error => {\n        console.log(error);\n        console.log(\"Returning false because server err\");\n        return 2;\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["std_but","axios","name","data","count","script","typedscript","error","components","methods","clicked","nextchar","concat","reset","submitForm","pattern","console","log","test","showBar","p","isFree","request","type","arguments","post","then","response","setTimeout","redirectHome","catch","submitBut","window","$cookies","isKey","set","parseInt","get","input","color","x","document","getElementById","className","replace","$router","push"],"sourceRoot":"","sources":["/Users/18chanp1/Library/CloudStorage/OneDrive-UBC/Active Use/UBC/20 Year 2/16 CPEN 291/04 Projects/P2_A_G20/main_server/vue-frontend/src/views/musicInput.vue"],"sourcesContent":["<template>\n<div class = \"General\">\n  <h1>Music Input</h1>\n  <!-- <hr> -->\n\n  <h2>Option 1: Text Input</h2>\n  <p>\n    To input your song, please prepare the following information:\n    \n  </p>\n  <ol>\n    <li>The pitch of each note (e.g. C)</li>\n    <li>The length of each note (e.g. 1 relative unit)</li>\n  </ol>\n\n  <p>\n    Type in chronological order, the pitch of each note, followed by the relative length \n    of each note. Do not include spaces. \n  </p>\n\n  <p>\n    For example, if you wish to play the note C for 1 RU, followed by the note\n    B for 2 RU, you would input the following:\n  </p>\n\n  <p>\n    C1B2 \n  </p>\n\n  <form @submit.prevent=\"submitForm\">\n    <textarea v-model = \"typedscript\">Input your music here.</textarea>\n    <br/>\n    <input type=\"submit\" value=\"Submit\" class = \"flexbut\" id = \"ButtonForSubmit\">\n  </form>   \n  \n  <h2>Option 2: Button Input</h2>\n  \n  <p>\n    Push the buttons to input the corresponding note. The duration\n    defaults to 1 RU.\n  </p>\n\n  <form @submit.prevent = \"submitBut\">\n    <div class=\"noteInput\">\n      <std_but type = \"button\" @pressed-button = \"clicked($event)\" class=\"flexbut\" text = \"C\"/>\n      <std_but type = \"button\" @pressed-button = \"clicked($event)\" class=\"flexbut\" text = \"D\"/>\n      <std_but type = \"button\" @pressed-button = \"clicked($event)\" class=\"flexbut\" text = \"E\"/>\n      <std_but type = \"button\" @pressed-button = \"clicked($event)\" class=\"flexbut\" text = \"F\"/>\n      <std_but type = \"button\" @pressed-button = \"clicked($event)\" class=\"flexbut\" text = \"G\"/>\n      <std_but type = \"button\" @pressed-button = \"clicked($event)\" class=\"flexbut\" text = \"A\"/>\n      <std_but type = \"button\" @pressed-button = \"clicked($event)\" class=\"flexbut\" text = \"B\"/>\n      <std_but type = \"button\" @pressed-button = \"clicked($event)\" class=\"flexbut\" text = \"R\"/>\n    </div>\n\n    <p>\n      Your Input: \n    </p>\n\n    <p class=\"inputdisp\">{{this.script}} </p>\n\n    <div class=\"submitButtons\">\n    <std_but type = \"button\" @pressed-button = \"reset()\" text = \"Reset\" class = \"flexbut2\"/>\n    <std_but @pressed-button = \"submit()\" text = \"Submit\" class = \"flexbut2\"/>\n    </div>\n\n    <div id=\"snackbar\">{{error}}</div>\n    <div id=\"snackbarG\">{{error}}</div>\n    \n  </form>\n\n</div>\n</template>\n\n<script>\nimport std_but from \"/src/components/std_but.vue\"\nimport axios from 'axios'\n\n  export default{\n    \n    name: 'musicInput',\n    data(){\n        return{\n            count:0,\n            script: '',\n            typedscript:'',\n            error: '',\n        }\n    },\n    components:{\n      std_but,\n    },\n    methods:{\n        clicked(nextchar){\n          this.count++\n          this.script = this.script.concat(nextchar)\n        },\n        reset(){\n          this.script=''\n        },\n        async submitForm(){\n          var pattern = /^(([A-GR][1-9]+)*)$/\n          console.log(pattern.test(this.typedscript))\n\n\n          if(!pattern.test(this.typedscript)){\n            console.log('inputerr')\n            this.showBar('Input error. Please study the input format in detail.', '')\n            return\n          }\n\n          \n          var p = this.isFree()\n          console.log(\"checking server is free?\")\n          console.log(p)\n\n          if (this.isFree() == 0){\n            console.log('robot playing')\n            this.showBar('The robot is currently playing music. Please try again later','')\n            return\n          }\n\n          if(this.isFree() == 2){\n            this.showBar(\"Server error. Please try again later.\",'')\n            return\n          }\n         \n         else {\n            console.log('submitted, typed')\n            const request = {\n              type: 'MusicInTyped',\n              arguments: this.typedscript,\n            }\n            \n            await axios \n              .post('/api/input/', request)\n              .then(response =>{\n                console.log(response)\n                this.showBar(\"Submission accepted. You will now be redirected home\", 'G')\n                setTimeout(this.redirectHome, 2500)\n                \n              }).catch(error => {\n                console.log(error)\n                this.showBar(\"Server error. Please try again later.\",'')\n              })\n          } \n        },async submitBut(){\n          console.log('submitted, button')\n          const request = {\n            type: 'MusicInButtoned',\n            arguments: this.script,\n          }\n\n          if(window.$cookies.isKey(\"sum\")){\n            window.$cookies.set(\"sum\", (parseInt(window.$cookies.get(\"sum\")) + 1))\n          } else {\n            window.$cookies.set(\"sum\", \"1\")\n          }\n          \n          await axios \n            .post('/api/input/', request)\n            .then(response =>{\n              console.log(response)\n              this.showBar(\"Submission accepted. You will now be redirected home\", 'G')\n              setTimeout(this.redirectHome, 2500)\n            }).catch(error => {\n              console.log(error)\n              this.showBar(\"Server error. Please try again later.\",'')\n            })\n          },\n          showBar(input, color) {\n            this.error = input\n            var x = document.getElementById(\"snackbar\" + color);\n            x.className = \"show\";\n            setTimeout(function(){ x.className = x.className.replace(\"show\", \"\"); }, 3000);\n          },\n          redirectHome(){\n            this.$router.push('/')\n          },\n           isFree(){\n            console.log('getting data')     \n            axios \n              .get('/api/status')\n              .then(response =>{\n                console.log(\"The data\")\n                console.log(response.data)\n\n                if(response.data == 'FREE'){\n                  console.log(\"returning true\")\n                  return 1\n                } else {\n                  return 0\n                }\n              \n              }).catch(error => {\n                console.log(error)\n                console.log(\"Returning false because server err\")\n                return 2\n              })\n          }\n    }\n       \n    }\n</script>\n\n\n<style>\n  h1{\n    font-family: Lato-Semibold;\n    font-size: 38px;\n    text-align: left;\n    border-bottom: 1px solid #af3c43;\n    border-bottom-color: rgb(175, 60, 67);\n    border-bottom-style: solid;\n    border-bottom-width: 1px;\n    margin-bottom: .2em;\n    margin-top: 1em;\n    padding-bottom: .2em;\n  }\n  h2{\n    font-family: Lato-SemiBold;\n    font-size: 34px;\n    text-align: left;\n    margin-bottom: 11.5px;\n    margin-top: 38px;\n  }\n  p {\n    font-family: Noto Sans;\n    font-size: 20px;\n    font-weight: 500;\n    text-align: left;\n    max-width: 65ch;\n  }\n  ol {\n    font-family: Noto Sans;\n    font-size: 20px;\n    font-weight: 500;\n    text-align: left;\n    max-width: 65ch;\n  }\n  .General{\n    margin: auto;\n    max-width: 65ch;\n    justify-content: center;\n  }\n  .noteInput{\n    display: grid ;\n    grid-template-columns: repeat(auto-fill,minmax(80px, 1fr));\n    background-color: #ffffff;\n    border-radius: 10px;\n    margin:10px;\n    padding: 30px;\n    justify-content: center;\n  }\n\n  .submitButtons{\n    display: flex ;\n    background-color: #ffffff;\n    border-radius: 10px;\n    margin:10px;\n    padding: 30px;\n    justify-content: center;\n  }\n\n  .flexbut{\n    font-family: Noto Sans;\n    background-color: #26374a;\n    color:white;\n    margin: 3px;\n    padding: 20px;\n    font-size: 20px;\n    text-align: center;\n    border-radius: 4px;\n    border: none;\n  }\n  .flexbut2{\n    font-family: Noto Sans;\n    background-color: #26374a;\n    color:white;\n    margin: 3px;\n    padding: 20px;\n    font-size: 20px;\n    text-align: center;\n    border-radius: 4px;\n    border: none;\n  }\n\n\n.flexbut:hover {\n  background-color: #1c578a;\n  outline:none;\n  }\n.button:active {\n  background-color: #16446c;\n  outline:none;\n}\n.inputdisp{\n  min-height: 40px;\n  border-style: solid;\n  padding: 10px;\n}\n.entryBox {\n  width: 205px; height: 39px\n}\n#ButtonForSubmit {\n  margin-top: 1em;\n}\n/* Snackbar */\n#snackbar {\n  border-radius: 4px;\n  visibility: hidden;\n  min-width: 250px;\n  margin-left: -125px;\n  background-color: #BB6464;\n  color: #fff;\n  text-align: center;\n  border-radius: 2px;\n  padding: 16px;\n  position: fixed;\n  z-index: 1;\n  left: 50%;\n  bottom: 30px;\n  font-size: 20px;\n}\n#snackbarG{\n  border-radius: 4px;\n  visibility: hidden;\n  min-width: 250px;\n  margin-left: -125px;\n  background-color: #88FF88;\n  color: #000000;\n  text-align: center;\n  border-radius: 2px;\n  padding: 16px;\n  position: fixed;\n  z-index: 1;\n  left: 50%;\n  bottom: 30px;\n  font-size: 20px;\n}\n#snackbar.show {\n  visibility: visible;\n  -webkit-animation: fadein 0.5s, fadeout 0.5s 2.5s;\n  animation: fadein 0.5s, fadeout 0.5s 2.5s;\n}\n#snackbarG.show {\n  visibility: visible;\n  -webkit-animation: fadein 0.5s, fadeout 0.5s 2.5s;\n  animation: fadein 0.5s, fadeout 0.5s 2.5s;\n}\n@-webkit-keyframes fadein {\n  from {bottom: 0; opacity: 0;} \n  to {bottom: 30px; opacity: 1;}\n}\n@keyframes fadein {\n  from {bottom: 0; opacity: 0;}\n  to {bottom: 30px; opacity: 1;}\n}\n@-webkit-keyframes fadeout {\n  from {bottom: 30px; opacity: 1;} \n  to {bottom: 0; opacity: 0;}\n}\n@keyframes fadeout {\n  from {bottom: 30px; opacity: 1;}\n  to {bottom: 0; opacity: 0;}\n}\n\ntextarea{\n    height : 15em;\n    width : 88vw;\n  }\n\n\n@media only screen and (min-width: 768px){\n  textarea{\n    height : 15em;\n    width : 75ch;\n  }\n}\n  \n</style>"]},"metadata":{},"sourceType":"module"}